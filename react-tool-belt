#!/usr/bin/python
import sys
import os
import argparse
import subprocess
from lib import commandCreator

#project modules import
from reverse import reverse
from resource import resource
from template import template

rootDir = os.path.dirname(os.path.realpath(__file__));
SUB_PARSER_NAME = 'subparser_name';

parser = argparse.ArgumentParser(prog='React Tool Belt', description='Tool Belt for React Native');
subparser = parser.add_subparsers(title='Sub Commands', metavar='list', dest=SUB_PARSER_NAME);

for cmd in commandCreator.list.list :
	subCmd = subparser.add_parser(cmd.name, prog=cmd.prog, help=cmd.help);
	for opt in cmd.options :
		subCmd.add_argument(opt.getName(), action='store', type=opt.type, default=opt.default, help=opt.help);


args = parser.parse_args();
selected = commandCreator.list.find(args.subparser_name);

if selected!=None :
	ns = vars(args);
	symbols = locals();
	module = symbols[selected.name];
	getattr(module, 'execute')(args);
else :
	print 'Ops!';
